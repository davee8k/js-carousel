/**
 * Jquery Carousel | options - sameSize	boolean; all images have same size - load only one image to find content size
 *
 * @author DaVee8k
 * @version 0.37.0
 * @license WTFNMFPL 1.0
 */
!function(i){i.fn.carousel=function(s){var e=this;return this.page=void 0!==s.page?s.page:"a",this.arrowsClass=void 0!==s.arrowsClass?s.arrowsClass:"carousel-arrows",this.move=void 0!==s.move?s.move:1,this.pause=void 0!==s.pause?s.pause:null,this.speed=void 0!==s.speed?s.speed:2,this.endless=void 0!==s.endless&&s.endless,this.cssOnly=void 0!==s.cssOnly&&s.cssOnly,this.sameSize=void 0!==s.sameSize&&s.sameSize,this.rows=void 0!==s.rows?s.rows:1,this.vertical="vertical"===s.direction,this.way=this.vertical?"top":"left",this.wayFill=this.vertical?"bottom":"right",this.arrowsElm=null,this.pagerElm=null,this.size=0,this.viewSize=0,this.count=0,this.borderTolerance=20,this.imgFix=0,this.timer=!1,this.init=function(s){this.viewSize=this.vertical?i(this).height():i(this).width(),this.count=Math.ceil(i(this).find(this.page).not(".carousel-endless-box "+this.page).length/this.rows),this.size=s?this.getItemSize(i(this).find(this.page).first())*this.count:this.getItemSize(i(this).children());var t=i(this).find(this.page).find("img").not(".carousel-endless-box "+this.page+" img");if(i(t).length>0)if(this.size=0,s)this.loadOneAll(t,0);else{var h=0;i(t).each(function(){if(i(this).attr(e.vertical?"height":"width"))e.size+=e.getItemSize(i(this).closest(e.page)),++h>=e.count&&e.finishInit();else{var s=this,t=new Image;i(t).one("load error",function(){e.size+=e.getItemSize(i(s).closest(e.page)),++h>=e.count&&e.finishInit()}).attr("src",i(s).data("src")||i(s).attr("src"))}})}else e.finishInit();return this.count>1},this.loadOneAll=function(s,t){if(t<this.count){var h=i(s).get(t),r=new Image;i(r).one("load",function(){e.size=e.getItemSize(i(h).closest(e.page))*e.count,e.finishInit()}).one("error",function(){e.loadOneAll(s,t+1)}).attr("src",i(h).data("src")||i(h).attr("src"))}},this.finishInit=function(){if(this.endless){var s=i(this).children(),e=Math.max(1,Math.ceil(Math.floor(this.viewSize)/Math.ceil(this.size)));if(0===i(s).children(".carousel-endless-box").length){var t=i(s).html();i(s).append('<div class="carousel-endless-box carousel-endless-pre">'),i(s).append('<div class="carousel-endless-box carousel-endless-post">');for(var h=0;h<e;h++)i(s).children(".carousel-endless-pre").append(t),i(s).children(".carousel-endless-post").append(t)}i(s).children(".carousel-endless-pre").css(this.way,-e*this.size+"px").css(this.wayFill,e*this.size+"px"),i(s).children(".carousel-endless-post").css(this.way,this.size+"px").css(this.wayFill,-this.size+"px")}this.toggleArrows()},this.createArrows=function(s){s&&0!==i("#"+s).length?this.elmArrow=i("#"+s):(this.elmArrow=i("<div "+(s?'id="'+s+'"':"")+' class="'+this.arrowsClass+'"><a href="#" class="'+this.arrowsClass+'-left"></a><a href="#" class="'+this.arrowsClass+'-right"></a></div>'),i(this).after(this.elmArrow)),i(this.elmArrow).find("."+this.arrowsClass+"-left").click(function(){return e.showNext(!1)}),i(this.elmArrow).find("."+this.arrowsClass+"-right").click(function(){return e.showNext(!0)}),this.toggleArrows()},this.createPager=function(s,t,h){var r=Math.ceil(this.count/h);if(0===i("#"+s).length){i(this).after('<div id="'+s+'"'+(t?' class="'+t+'"':"")+"></div>");for(var a=0;a<r;a++)i("#"+s).append('<a href="#"><span>'+(a+1)+"</span></a>");i("#"+s).children("a:first-child").addClass("select")}for(a=0;a<r;a++)i(i("#"+s).find("a").get(a)).click(function(){return e.showNum((i(this).children("span").text()-1)*h),!1});this.initPause("#"+s)},this.toggleArrows=function(){if(!this.endless&&null!==this.elmArrow){var s=Math.round(this.getPosition(i(this).children()));i(this.elmArrow).find("a").removeClass("disabled"),s>=0&&i(this.elmArrow).find("."+this.arrowsClass+"-left").addClass("disabled"),this.viewSize-s>=this.size&&i(this.elmArrow).find("."+this.arrowsClass+"-right").addClass("disabled")}},this.initPause=function(s){this.pause&&i(s).hover(function(){e.timer.pause()},function(){e.timer.play()})},this.animateTo=function(s,t,h,r){if(this.cssOnly||!0===r)i(s).css(this.way,t+"px").css(this.wayFill,-t+"px"),setTimeout(function(){e.toggleArrows()},200);else{var a={};a[this.way]=t+"px",a[this.wayFill]=-t+"px",i(s).animate(a,e.speed*Math.abs(-t+h),function(){e.toggleArrows()})}},this.showNext=function(s){var e=i(this).children();i(e).finish();var t=0,h=0,r=this.getPosition(e);if(parseInt(this.move)===this.move)h=this.getItemSize(this.findFirstVisible());else if(this.move.indexOf("%")>0){var a=parseFloat(this.move.replace(/[^\d.]/g,""));h=this.viewSize*a/100}else h=this.move;return this.endless&&(!s&&r>0?(r-=Math.ceil(r/this.size)*this.size,this.animateTo(e,r,0,!0)):s&&r-h<=-this.size&&(r-=Math.floor(r/this.size)*this.size,this.animateTo(e,r,0,!0))),s?t=this.endless||-r+h+this.viewSize<this.size-this.borderTolerance?r-h:-this.size+this.viewSize:(this.endless||r+h<-this.borderTolerance)&&(t=r+h),(this.endless||t<=0)&&this.animateTo(e,t,r),this.timer&&this.timer.restart(),!1},this.showNum=function(s){if(s>0&&(s-=this.imgFix),s>=this.count)return!1;var e=0,t=this.getPosition(i(this).children());if(this.size>this.viewSize){var h=this.getPosition(i(this).find(this.page)[s]);this.size<h+this.viewSize/2?e=-this.size+this.viewSize:this.viewSize/2<h&&(e=this.viewSize/2-h)}return this.animateTo(i(this).children(),e,t),!1},this.getPosition=function(s){return i(s).position()[this.way]},this.getItemSize=function(s){return this.vertical?i(s).outerHeight(!0):i(s).outerWidth(!0)},this.findFirstVisible=function(){for(var s=Math.abs(this.getPosition(i(this).children())),e=i(this).find(this.page),t=0;t<e.length;t++)if(s<=Math.ceil(this.getPosition(i(e).eq(t))))return i(e).eq(t);return null},this.init(this.sameSize)&&(void 0!==s.arrows&&!1===s.arrows||this.createArrows("boolean"==typeof s.arrows?"":s.arrows),void 0!==s.pager&&!1!==s.pager&&this.createPager(s.pager,void 0!==s.pagerClass&&s.pagerClass,void 0!==s.perPage?s.perPage:1),this.pause&&(this.timer=new Timer(function(){e.showNext(!0)},this.pause),this.initPause(this)),i(window).resize(function(){e.init(e.sameSize),e.viewSize-e.getPosition(i(e).children())>e.size&&e.animateTo(i(e).children(),e.viewSize>e.size?0:e.viewSize-e.size,0,!0),e.toggleArrows()})),{pause:function(){e.pause&&e.timer.pause()},play:function(){e.pause&&e.timer.play()},showNum:function(i){e.showNum(i)},showNext:function(i){e.showNext(i)}}}}(jQuery);