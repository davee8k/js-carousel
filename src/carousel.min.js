/**
 * jQuery Carousel | options - sameSize	boolean; all images have same size - load only one image to find content size
 * min jquery version 1.9+
 *
 * @author DaVee8k
 * @version 0.39.1
 * @license WTFNMFPL 1.0
 */
!function(o){o.fn.carousel=function(i){var h=this;return this.item=void 0!==i.item?i.item:"a",this.arrowsClass=void 0!==i.arrowsClass?i.arrowsClass:"carousel-arrows",this.move=void 0!==i.move?i.move:1,this.pause=void 0!==i.pause?i.pause:null,this.speed=void 0!==i.speed?i.speed:2,this.endless=void 0!==i.endless&&i.endless,this.cssOnly=void 0!==i.cssOnly&&i.cssOnly,this.sameSize=void 0!==i.sameSize&&i.sameSize,this.rows=void 0!==i.rows?i.rows:1,this.vertical="vertical"===i.direction,this.way=this.vertical?"top":"left",this.wayFill=this.vertical?"bottom":"right",this.elmArrow=null,this.elmPager=null,this.size=0,this.viewSize=0,this.count=0,this.borderTolerance=20,this.imgFix=0,this.timer=null,this.isSwiping=!1,this.position=null,this.init=function(i){this.viewSize=this.vertical?o(this).height():o(this).width(),this.count=Math.ceil(o(this).find(this.item).not(".carousel-endless-box "+this.item).length/this.rows);var s=o(this).find(this.item).find("img").not(".carousel-endless-box "+this.item+" img");return 0<o(s).length?this.loadImages(i?o(s).first():o(s).slice(0,this.count)):this.continueInit(i),1<this.count},this.loadImages=function(i,s){var t=0,e=o(i).length;o(i).each(function(){var i=new Image;o(i).one("load error",function(){++t>=e&&h.continueInit(s)}).attr("src",o(this).data("src")||o(this).attr("src"))})},this.continueInit=function(i){if(this.size=0,i)this.size=this.getItemSize(o(this).find(this.item).first())*this.count;else{var s=o(this).find(this.item).slice(0,this.count).get();if(s)for(var t in s)this.size+=this.getItemSize(s[t])}this.finishInit()},this.finishInit=function(){if(this.endless){var i=o(this).children(),s=Math.max(1,Math.ceil(Math.floor(this.viewSize)/Math.ceil(this.size)));if(0===o(i).children(".carousel-endless-box").length&&s!==1/0){var t=o(i).html();o(i).append('<div class="carousel-endless-box carousel-endless-pre">'),o(i).append('<div class="carousel-endless-box carousel-endless-post">');for(var e=0;e<s;e++)o(i).children(".carousel-endless-pre").append(t),o(i).children(".carousel-endless-post").append(t)}o(i).children(".carousel-endless-pre").css(this.way,-(s*this.size)+"px").css(this.wayFill,s*this.size+"px"),o(i).children(".carousel-endless-post").css(this.way,this.size+"px").css(this.wayFill,-this.size+"px")}this.toggleArrows()},this.createArrows=function(i){i&&0!==o("#"+i).length?i&&(this.elmArrow=o("#"+i)):(this.elmArrow=o("<div"+(i?' id="'+i+'"':"")+' class="'+this.arrowsClass+'"><a href="#" class="'+this.arrowsClass+'-left"></a><a href="#" class="'+this.arrowsClass+'-right"></a></div>'),o(this).after(this.elmArrow)),o(this.elmArrow).find("."+this.arrowsClass+"-left").click(function(i){i.preventDefault(),h.showNext(!1)}),o(this.elmArrow).find("."+this.arrowsClass+"-right").click(function(i){i.preventDefault(),h.showNext(!0)}),this.toggleArrows()},this.createPager=function(i,s,t){var e=Math.ceil(this.count/t);if(i&&0!==o("#"+i).length)i&&(this.elmPager=o("#"+i));else{this.elmPager=o("<div"+(i?' id="'+i+'"':"")+(s?' class="'+s+'"':"")+"></div>");for(var n=0;n<e;n++)o(this.elmPager).append('<a href="#"><span>'+(n+1)+"</span></a>");o(this.elmPager).children("a:first-child").addClass("active"),o(this).after(this.elmPager)}o(this.elmPager).find("a").click(function(i){i.preventDefault();i=Number.parseInt(o(this).children("span").text())-1;o(h.elmPager).children("a").removeClass("active"),o(this).addClass("active"),h.showNum(i*t)}),this.initPause(this.elmPager)},this.toggleArrows=function(){var i;this.endless||null===this.elmArrow||(i=Math.round(this.getPosition(o(this).children())),o(this.elmArrow).find("a").removeClass("disabled"),0<=i&&o(this.elmArrow).find("."+this.arrowsClass+"-left").addClass("disabled"),this.viewSize-i>=this.size&&o(this.elmArrow).find("."+this.arrowsClass+"-right").addClass("disabled"))},this.initPause=function(i){this.pause&&o(i).hover(function(){h.timer.pause()},function(){h.timer.play()})},this.animateTo=function(i,s,t,e){this.cssOnly||!0===e?(o(i).css(this.way,s+"px").css(this.wayFill,-s+"px"),setTimeout(function(){h.toggleArrows()},200)):((e={})[this.way]=s+"px",e[this.wayFill]=-s+"px",o(i).animate(e,h.speed*Math.abs(-s+t),function(){h.toggleArrows()}))},this.showNext=function(i){var s=o(this).children();o(s).finish();var t,e=0;e=parseInt(this.move)===this.move?this.getItemSize(this.findFirstVisible(i))*this.move:0<this.move.indexOf("%")?(t=parseFloat(this.move.replace(/[^\d.]/g,"")),this.viewSize*t/100):this.move,this.tryMove(s,i?e:-e,!1)},this.tryMove=function(i,s,t){var e=0,n=this.getPosition(i);this.endless&&(s<0&&0<n?(n-=Math.ceil(n/this.size)*this.size,this.animateTo(i,n,0,!0)):0<s&&n-s<=-this.size&&(n-=Math.floor(n/this.size)*this.size,this.animateTo(i,n,0,!0))),0<s?e=this.endless||-n+s+this.viewSize<this.size-this.borderTolerance?n-s:-this.size+this.viewSize:(this.endless||n-s<-this.borderTolerance)&&(e=n-s),(this.endless||e<=0)&&this.animateTo(i,e,n,t),this.timer&&this.timer.restart()},this.showNum=function(i){if(0<i&&(i-=this.imgFix),i>=this.count)return!1;var s=0,t=this.getPosition(o(this).children());return this.size>this.viewSize&&(i=this.getPosition(o(this).find(this.item)[i]),this.size<i+this.viewSize/2?s=-this.size+this.viewSize:this.viewSize/2<i&&(s=this.viewSize/2-i)),this.animateTo(o(this).children(),s,t),!0},this.getPosition=function(i){return Math.round(o(i).position()[this.way])},this.getItemSize=function(i){return this.vertical?o(i).outerHeight(!0):o(i).outerWidth(!0)},this.findFirstVisible=function(i){for(var s=Math.abs(this.getPosition(o(this).children())),t=o(this).find(this.item),e=0;e<t.length;e++)if(s<=Math.ceil(this.getPosition(o(t).eq(e))))return o(t).eq(e);return o(t).eq(i?0:this.count-1)},this.init(this.sameSize)&&(void 0!==i.arrows&&!1===i.arrows||this.createArrows("boolean"==typeof i.arrows?"":i.arrows),void 0!==i.pager&&!1!==i.pager&&this.createPager("boolean"==typeof i.pager?"":i.pager,void 0!==i.pagerClass?i.pagerClass:null,void 0!==i.perPage?i.perPage:1),this.pause&&(this.timer=new Timer(function(){h.showNext(!0)},this.pause),this.initPause(this)),o(window).resize(function(){h.init(h.sameSize),h.viewSize-h.getPosition(o(h).children())>h.size&&h.animateTo(o(h).children(),h.viewSize>h.size?0:h.viewSize-h.size,0,!0),h.toggleArrows()})),!(this.getEventPosition=function(i){return window.TouchEvent&&i.originalEvent instanceof TouchEvent&&(i=i.originalEvent.touches[0]),"top"===this.way?i.clientY:i.clientX})!==i.swipe&&(o(this).on("dragstart",function(i){i.preventDefault()}),o(this).on("touchstart mousedown",function(i){o(h).children().addClass("carousel-nomination"),h.isSwiping=!1,h.position=h.getEventPosition(i)}),o(this).on("touchmove mousemove",function(i){var s;h.position&&!1!==h.position&&(s=h.position,h.isSwiping=!0,h.position=h.getEventPosition(i),h.tryMove(o(this).children(),s-h.position,!0))}),o(this).on("touchend mouseup mouseleave",function(i){o(h).children().removeClass("carousel-nomination"),h.position=null}),o(this).on("click",function(i){h.isSwiping&&i.preventDefault()})),{getCount:function(){return h.count},pause:function(){h.pause&&h.timer.pause()},play:function(){h.pause&&h.timer.play()},showNum:function(i){h.showNum(i)},showNext:function(i){h.showNext(i)}}}}(jQuery);
